{% block _product_grid_row_price_widget %}
    {% set attr = {
        "data-page-component-module": "oroui/js/app/components/view-component",
        "data-page-component-options": {
            view: 'orob2bpricing/js/app/views/base-product-prices-view',
            elements: {
                el: ['$el', 'closest', '.grid-row']
            },
            prices: {
                item: [{price: 6, currency: "USD", qty: 1}, {price: 3, currency: "USD", qty: 10}],
                each: [{price: 10, currency: "USD", qty: 2}, {price: 5, currency: "USD", qty: 10}]
            }
            }|json_encode
    }|merge(attr|merge({
        class: attr.class|default('') ~ " product-item__price product-item__price_<%= themeOptions.view %> mb1-md mb1-sm",
    })) %}
    <div {{ block('block_attributes') }}>
        <div data-role="price">
            {{ 'orob2b.pricing.frontend.pricelist.index.your_price'|trans }}
            <div class="product-item__price_block" data-role="prices-hint" data-placement="bottom" data-close="false" data-trigger="hover">
                {# TODO: apply correct price in scope of BB-2461 #}
                <div><span class="fs16 blue" data-role="price-value">$12.99</span> / item</div>
            </div>
        </div>
        <div data-role="prices-hint-content" style="display:none;">
            <% _.each(model.prices, function(price, forField) { %>
                <div><span class="fs16 blue"><%= price.formatted_price %></span> / <%= price.formatted_unit %></div>
            <% }) %>
        </div>
        <div data-role="price-not-found">
            <% if (!_.isEmpty(model.prices)) { %>
                {{ 'orob2b.pricing.frontend.product_prices.price_not_found'|trans }}
            <% } else { %>
                {{ 'orob2b.pricing.frontend.product_prices.empty_prices'|trans }}
            <% } %>
        </div>
    </div>
{% endblock %}

{% block _product_grid_row_listed_price_widget %}
    {% set attr = attr|merge({
        class: attr.class|default('') ~ " product-item__listed-price product-item__listed-price_<%= themeOptions.view %>"
    }) %}
    <div {{ block('block_attributes') }}>
        <% if (!_.isEmpty(model.prices)) { %>
            {{ 'orob2b.pricing.frontend.pricelist.index.listed_price'|trans }}
            <div class="product-item__price_block">
                <% var pricesPerUnits = {};
                _.each(model.prices, function(price) {
                    var unit = price.unit;
                    if (!pricesPerUnits[unit] || price.quantity < pricesPerUnits[unit].quantity) {
                        pricesPerUnits[unit] = price;
                    }
                }) %>
                <% _.each(pricesPerUnits, function(price) { %>
                    <div title="{{ 'orob2b.pricing.productprice.applicable_from'|trans({'%amount%': '<%= price.quantity_with_unit %>'})|raw }}">
                        <span><%= price.formatted_price %></span> / <%= price.formatted_unit %>
                    </div>
                <% }) %>
            </div>
        <% } %>
    </div>
{% endblock %}

{% block _product_grid_row_msrp_widget %}
    {% set attr = attr|merge({
        class: attr.class|default('') ~ " product-item__mspr product-item__mspr_<%= themeOptions.view %>"
    }) %}
    <div {{ block('block_attributes') }}>
        {{ 'orob2b.pricing.frontend.pricelist.index.msrp'|trans }} <span>$24.99</span>
    </div>
{% endblock %}
