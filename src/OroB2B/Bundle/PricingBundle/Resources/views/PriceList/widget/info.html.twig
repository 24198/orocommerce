{% import 'OroUIBundle::macros.html.twig' as UI %}
{% import 'OroEntityConfigBundle::macros.html.twig' as entityConfig %}

<div class="widget-content">
    <div class="row-fluid form-horizontal">
        <div class="responsive-block">
            {{ UI.renderProperty('orob2b.pricing.pricelist.name.label'|trans, entity.name) }}

            {% if entity.currencies %}
                {% set currencies = [] %}
                {% for currency in entity.currencies %}
                    {% set currencies = currencies|merge([currency|oro_localized_currency_name]) %}
                {% endfor %}
                {{ UI.renderHtmlProperty('orob2b.pricing.pricelist.currencies.label'|trans, UI.renderList(currencies)) }}
            {% endif %}

            {% if not entity.schedules.isEmpty() %}
                {{ UI.renderHtmlProperty('orob2b.pricing.pricelist.schedule.label'|trans, _self.schedule(entity.schedules)) }}
            {% endif %}
        </div>
    </div>
</div>

{% macro schedule(schedules) %}
    <table class="grid table-hover table table-bordered">
        <thead>
        <tr>
            <th><span>{{ 'orob2b.pricing.pricelist_schedule.active_at.label'|trans }}</span></th>
            <th><span>{{ 'orob2b.pricing.pricelist_schedule.deactivate_at.label'|trans }}</span></th>
        </tr>
        </thead>
        <tbody>
            {% for schedule in schedules %}
                <tr>
                    <td>{% if schedule.activeAt is not null %}{{ schedule.activeAt|oro_format_datetime }}{% endif %}</td>
                    <td>{% if schedule.deactivateAt is not null %}{{ schedule.deactivateAt|oro_format_datetime }}{% endif %}</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
{% endmacro %}
