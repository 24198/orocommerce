workflows:
    b2b_flow_checkout:
        label: orob2b.checkout.workflow.b2b_flow_checkout.label
        entity: OroB2B\Bundle\CheckoutBundle\Entity\Checkout
        entity_attribute: checkout
        start_step: enter_billing_address
        steps_display_ordered: true

        attributes:
            billing_address:
                property_path: checkout.billingAddress
            shipping_address:
                property_path: checkout.shippingAddress
            save_billing_address:
                property_path: checkout.saveBillingAddress
            save_shipping_address:
                property_path: checkout.saveShippingAddress
            ship_to_billing_address:
                property_path: checkout.shipToBillingAddress
            po_number:
                property_path: checkout.poNumber
            ship_until:
                property_path: checkout.shipUntil

        steps:
            enter_billing_address:
                label: orob2b.checkout.workflow.b2b_flow_checkout.step.enter_billing_address.label
                order: 10
                allowed_transitions:
                    - continue_to_shipping_address
            enter_shipping_address:
                label: orob2b.checkout.workflow.b2b_flow_checkout.step.enter_shipping_address.label
                order: 20
                allowed_transitions:
                    - continue_to_shipping_method
                    - back_to_billing_address
            enter_shipping_method:
                label: orob2b.checkout.workflow.b2b_flow_checkout.step.enter_shipping_method.label
                order: 30
                allowed_transitions:
                    - continue_to_payment
                    - back_to_billing_address
                    - back_to_shipping_address
            enter_payment:
                label: orob2b.checkout.workflow.b2b_flow_checkout.step.enter_payment.label
                order: 40
                allowed_transitions:
                    - continue_to_place_order
                    - back_to_billing_address
                    - back_to_shipping_address
                    - back_to_shipping_method
            place_order:
                label: orob2b.checkout.workflow.b2b_flow_checkout.step.place_order.label
                order: 50
                is_final: true
                allowed_transitions:
                    - place_order
                    - back_to_billing_address
                    - back_to_shipping_address
                    - back_to_shipping_method
                    - back_to_payment
        transitions:
            continue_to_shipping_address:
                label: orob2b.checkout.workflow.b2b_flow_checkout.transition.continue_to_shipping_address.label
                step_to: enter_shipping_address
                transition_definition: dummy

            continue_to_shipping_method:
                label: orob2b.checkout.workflow.b2b_flow_checkout.transition.continue_to_shipping_method.label
                step_to: enter_shipping_method
                transition_definition: dummy

            continue_to_payment:
                label: orob2b.checkout.workflow.b2b_flow_checkout.transition.continue_to_payment.label
                step_to: enter_payment
                transition_definition: dummy

            continue_to_place_order:
                label: orob2b.checkout.workflow.b2b_flow_checkout.transition.continue_to_place_order.label
                step_to: place_order
                transition_definition: dummy

            back_to_billing_address:
                label: orob2b.checkout.workflow.b2b_flow_checkout.transition.back_to_billing_address.label
                step_to: enter_billing_address
                transition_definition: dummy

            back_to_shipping_address:
                label: orob2b.checkout.workflow.b2b_flow_checkout.transition.back_to_shipping_address.label
                step_to: enter_shipping_address
                transition_definition: dummy

            back_to_shipping_method:
                label: orob2b.checkout.workflow.b2b_flow_checkout.transition.back_to_shipping_method.label
                step_to: enter_shipping_method
                transition_definition: dummy

            back_to_payment:
                label: orob2b.checkout.workflow.b2b_flow_checkout.transition.back_to_payment.label
                step_to: enter_payment
                transition_definition: dummy

            place_order:
                label: orob2b.checkout.workflow.b2b_flow_checkout.transition.place_order.label
                step_to: place_order
                transition_definition: dummy

        transition_definitions:
            dummy:
                pre_conditions:
                    @not_empty: $checkout.id
