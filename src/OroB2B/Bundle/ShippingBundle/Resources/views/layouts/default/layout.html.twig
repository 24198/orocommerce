{% block shipping_methods_widget %}
    {% set currentShippingMethod = currentShippingMethod|default(null) %}
    {% set currentShippingMethodType = currentShippingMethodType|default(null) %}
    <div class="{{ class_prefix }}__form" data-content="shipping_method_form">
        <div class="{{ class_prefix }}__form__row">
            <div class="{{ class_prefix }}__form__col form__col_x6" data-shipping-method-forms>
                {% if methods|length > 0 %}
                    <span class="{{ class_prefix }}__form__label">{{ 'orob2b.shipping.methods.select_method'|trans }}<sup class="red">*</sup></span>
                    {% for name, method in methods if methods is defined and method is iterable %}
                        {% if method.types is defined and method.types|length > 0 %}
                            {% set currentShippingMethodType = currentShippingMethodType|default(method.types|keys|first) %}
                            <span class="checkbox_custom__text fs13">{{ method.label }}</span>
                            {% for type in method.types if method.types is defined and type is iterable %}
                                {% set selected = currentShippingMethodType == type.name %}
                                <div class="{{ class_prefix }}__form__radio" data-item-container>
                                    <label class="radio_custom radio_custom_blue {% if selected %}checked{% endif %}" data-radio tabindex="0">
                                        <input type="radio" name="shippingMethodType" data-shipping-method="{{ method.name }}" data-shipping-rule-config="{{ type.shippingRuleConfig }}" data-shipping-price="{{ type.price.value }}" data-choice="{{ type.name }}" value="{{ type.name }}" {% if selected%}checked="checked"{% endif %} />
                                        <i class="cf-radio_button_checked radio_checked fs18 mmr5-md"></i>
                                        <i class="cf-radio_button_unchecked radio_not-checked fs18 mmr5-md"></i>
                                        <span class="checkbox_custom__text fs13">{{ type.label }}: <strong>{{ type.price|oro_format_price }}</strong></span>
                                    </label>
                                </div>
                            {% endfor %}
                        {% else %}
                            {% set selected = currentShippingMethod == method.name %}
                            <div class="{{ class_prefix }}__form__radio" data-item-container>
                                <label class="radio_custom radio_custom_blue {% if selected %}checked{% endif %}" data-radio tabindex="0">
                                    <input type="radio" name="shippingMethod" data-shipping-rule-config="{{ method.shippingRuleConfig }}"  data-shipping-price="{{ method.price.value }}" data-choice="{{ method.name }}" value="{{ method.name }}" {% if selected%}checked="checked"{% endif %} />
                                    <i class="cf-radio_button_checked radio_checked fs18 mmr5-md"></i>
                                    <i class="cf-radio_button_unchecked radio_not-checked fs18 mmr5-md"></i>
                                    <span class="checkbox_custom__text fs13">{{ method.label }}: <strong>{{ method.price|oro_format_price }}</strong></span>
                                </label>
                            </div>
                        {% endif %}
                    {% endfor %}
                {% else %}
                    <span class="{{ class_prefix }}__form__label notification notification_xmd notification_alert notification-radiused mb1-md" >{{ 'orob2b.shipping.methods.no_method'|trans }}</span>
                {% endif %}
            </div>
        </div>
    </div>
{% endblock %}
