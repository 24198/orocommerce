datagrid:
    tax-base-tax-codes-grid:
        source:
            type: orm
            query:
                select:
                    - tax_code.id
                    - tax_code.code
                    - tax_code.description
        sorters:
            columns:
                code:
                    data_name: tax_code.code
                description:
                    data_name: tax_code.description
            default:
                id: %oro_datagrid.extension.orm_sorter.class%::DIRECTION_ASC
        filters:
            columns:
                code:
                    type:      string
                    data_name: tax_code.code
                description:
                    type:      string
                    data_name: tax_code.description
        properties:
            id: ~

    tax-base-grid-tax-codes-grid:
        extends: tax-base-tax-codes-grid
        properties:
            view_link:
                type:   url
                params: [ id ]
            update_link:
                type:   url
                params: [ id ]
            delete_link:
                type:   url
                params: [ id ]
        actions:
            view:
                type:          navigate
                label:         oro.grid.action.view
                link:          view_link
                icon:          eye-open
                rowAction:     true
            update:
                type:          navigate
                label:         oro.grid.action.update
                link:          update_link
                icon:          edit
            delete:
                type:          delete
                label:         oro.grid.action.delete
                link:          delete_link
                icon:          trash

    tax-product-tax-codes-grid:
        extends: tax-base-grid-tax-codes-grid
        options:
            entityHint: product tax code
        source:
            acl_resource: orob2b_tax_product_tax_code_view
            query:
                from:
                    - { table: %orob2b_tax.entity.product_tax_code.class%, alias: tax_code }
        columns:
            code:
                label: orob2b.tax.producttaxcode.code.label
            description:
                label: orob2b.tax.producttaxcode.description.label
        properties:
            view_link:
                route: orob2b_tax_product_tax_code_view
            update_link:
                route:  orob2b_tax_product_tax_code_update
            delete_link:
                route:  orob2b_api_tax_delete_producttaxcode
        actions:
            view:
                acl_resource:  orob2b_tax_product_tax_code_view
            update:
                acl_resource:  orob2b_tax_product_tax_code_update
            delete:
                acl_resource:  orob2b_tax_product_tax_code_delete

    tax-account-tax-codes-grid:
        extends: tax-base-grid-tax-codes-grid
        options:
            entityHint: account tax code
        source:
            acl_resource: orob2b_tax_account_tax_code_view
            query:
                from:
                    - { table: %orob2b_tax.entity.account_tax_code.class%, alias: tax_code }
        columns:
            code:
                label: orob2b.tax.accounttaxcode.code.label
            description:
                label: orob2b.tax.accounttaxcode.description.label
        properties:
            view_link:
                route: orob2b_tax_account_tax_code_view
            update_link:
                route:  orob2b_tax_account_tax_code_update
            delete_link:
                route:  orob2b_api_tax_delete_accounttaxcode
        actions:
            view:
                acl_resource:  orob2b_tax_account_tax_code_view
            update:
                acl_resource:  orob2b_tax_account_tax_code_update
            delete:
                acl_resource:  orob2b_tax_account_tax_code_delete

    tax-account-group-tax-codes-grid:
        extends: tax-base-grid-tax-codes-grid
        options:
            entityHint: account group tax code
        source:
            acl_resource: orob2b_tax_account_group_tax_code_view
            query:
                from:
                    - { table: %orob2b_tax.entity.account_group_tax_code.class%, alias: tax_code }
        columns:
            code:
                label: orob2b.tax.accountgrouptaxcode.code.label
            description:
                label: orob2b.tax.accountgrouptaxcode.description.label
        properties:
            view_link:
                route: orob2b_tax_account_group_tax_code_view
            update_link:
                route:  orob2b_tax_account_group_tax_code_update
            delete_link:
                route:  orob2b_api_tax_delete_accountgrouptaxcode
        actions:
            view:
                acl_resource:  orob2b_tax_account_group_tax_code_view
            update:
                acl_resource:  orob2b_tax_account_group_tax_code_update
            delete:
                acl_resource:  orob2b_tax_account_group_tax_code_delete

    products-tax-code-select-grid:
        extends: tax-base-tax-codes-grid
        options:
            entityHint: product tax code
        source:
            acl_resource: orob2b_tax_product_tax_code_view
            query:
                from:
                    - { table: %orob2b_tax.entity.product_tax_code.class%, alias: tax_code }
        columns:
            code:
                label: orob2b.tax.accounttaxcode.code.label
            description:
                label: orob2b.tax.accounttaxcode.description.label

    accounts-tax-code-select-grid:
        extends: tax-base-tax-codes-grid
        options:
            entityHint: account tax code
        source:
            acl_resource: orob2b_tax_account_tax_code_view
            query:
                from:
                    - { table: %orob2b_tax.entity.account_tax_code.class%, alias: tax_code }
        columns:
            code:
                label: orob2b.tax.accounttaxcode.code.label
            description:
                label: orob2b.tax.accounttaxcode.description.label

    tax-taxes-grid-base:
        options:
            entityHint: tax
        source:
            acl_resource: orob2b_tax_view
            type:         orm
            query:
                select:
                    - tax.id
                    - tax.code
                    - tax.description
                    - tax.rate
                from:
                    - { table: %orob2b_tax.entity.tax.class%, alias: tax }
        columns:
            code:
                label: orob2b.tax.code.label
            description:
                label: orob2b.tax.description.label
            rate:
                label: orob2b.tax.rate.label
                frontend_type: percent
        sorters:
            columns:
                code:
                    data_name: tax.code
                description:
                    data_name: tax.description
                rate:
                    data_name: tax.rate
            default:
                id: %oro_datagrid.extension.orm_sorter.class%::DIRECTION_ASC
        filters:
            columns:
                code:
                    type:      string
                    data_name: tax.code
                description:
                    type:      string
                    data_name: tax.description
                rate:
                    type:      string
                    data_name: tax.rate
        properties:
            id: ~

    tax-taxes-grid:
        extends: tax-taxes-grid-base
        properties:
            view_link:
                type:  url
                route: orob2b_tax_view
                params: [ id ]
            update_link:
                type:   url
                route:  orob2b_tax_update
                params: [ id ]
            delete_link:
                type:   url
                route:  orob2b_api_tax_delete_tax
                params: [ id ]
        actions:
            view:
                type:          navigate
                label:         oro.grid.action.view
                link:          view_link
                icon:          eye-open
                acl_resource:  orob2b_tax_view
                rowAction:     true
            update:
                type:          navigate
                label:         oro.grid.action.update
                link:          update_link
                icon:          edit
                acl_resource:  orob2b_tax_update
            delete:
                type:          delete
                label:         oro.grid.action.delete
                link:          delete_link
                icon:          trash
                acl_resource:  orob2b_tax_delete

    tax-taxes-select-grid:
        extends: tax-taxes-grid-base

    tax-taxe-rules-grid:
        options:
            entityHint: tax
        source:
            acl_resource: orob2b_tax_rule_view
            type:         orm
            query:
                select:
                    - tax_rule.id
                    - tax_rule.description
                    - account_tax_code.code as account_tax_code_code
                    - product_tax_code.code as product_tax_code_code
                    - tax.code as tax_code
                    - tax_jutisdiction.code as tax_jurisdiction_code
                from:
                    - { table: %orob2b_tax.entity.tax_rule.class%, alias: tax_rule }
                join:
                    left:
                        - { join: tax_rule.accountTaxCode, alias: account_tax_code }
                        - { join: tax_rule.productTaxCode, alias: product_tax_code }
                        - { join: tax_rule.tax, alias: tax }
                        - { join: tax_rule.taxJurisdiction, alias: tax_jutisdiction }
        columns:
            account_tax_code_code:
                label: orob2b.tax.taxrule.account_tax_code.label
            product_tax_code_code:
                label: orob2b.tax.taxrule.product_tax_code.label
            tax_jurisdiction_code:
                label: orob2b.tax.taxrule.tax_jurisdiction.label
            tax_code:
                label: orob2b.tax.taxrule.tax.label
            description:
                label: orob2b.tax.taxrule.description.label
        sorters:
            columns:
                description:
                    data_name: description
                account_tax_code_code:
                    data_name: account_tax_code_code
                product_tax_code_code:
                    data_name: product_tax_code_code
                tax_code:
                    data_name: tax_code
                tax_jurisdiction_code:
                    data_name: tax_jurisdiction_code
            default:
                id: %oro_datagrid.extension.orm_sorter.class%::DIRECTION_ASC
        filters:
            columns:
                description:
                    type:      string
                    data_name: tax_rule.description
                account_tax_code_code:
                    type:      entity
                    data_name: account_tax_code.id
                    options:
                       field_type: entity
                       field_options:
                           class:    %orob2b_tax.entity.account_tax_code.class%
                           property: code
                product_tax_code_code:
                    type:      entity
                    data_name: product_tax_code.id
                    options:
                       field_type: entity
                       field_options:
                           class:    %orob2b_tax.entity.product_tax_code.class%
                           property: code
                tax_code:
                    type:      entity
                    data_name: tax.id
                    options:
                       field_type: entity
                       field_options:
                           class:    %orob2b_tax.entity.tax.class%
                           property: code
                tax_jurisdiction_code:
                    type:      entity
                    data_name: tax_jurisdiction.id
                    options:
                       field_type: entity
                       field_options:
                           class:    %orob2b_tax.entity.tax_jurisdiction.class%
                           property: code
        properties:
            id: ~
            view_link:
                type:  url
                route: orob2b_tax_rule_view
                params: [ id ]
            update_link:
                type:   url
                route:  orob2b_tax_rule_update
                params: [ id ]
            delete_link:
                type:   url
                route:  orob2b_api_tax_delete_taxrule
                params: [ id ]
        actions:
            view:
                type:          navigate
                label:         oro.grid.action.view
                link:          view_link
                icon:          eye-open
                acl_resource:  orob2b_tax_rule_view
                rowAction:     true
            update:
                type:          navigate
                label:         oro.grid.action.update
                link:          update_link
                icon:          edit
                acl_resource:  orob2b_tax_rule_update
            delete:
                type:          delete
                label:         oro.grid.action.delete
                link:          delete_link
                icon:          trash
                acl_resource:  orob2b_tax_rule_delete

    tax-jurisdiction-base-grid:
        source:
            acl_resource: orob2b_tax_jurisdiction_view
            type: orm
            query:
                select:
                    - jurisdiction.id
                    - jurisdiction.code
                    - jurisdiction.description
                from:
                    - { table: %orob2b_tax.entity.tax_jurisdiction.class%, alias: jurisdiction }
        columns:
            code:
                label: orob2b.tax.taxjurisdiction.code.label
            description:
                label: orob2b.tax.taxjurisdiction.description.label
        sorters:
            columns:
                code:
                    data_name: jurisdiction.code
                description:
                    data_name: jurisdiction.description
            default:
                id: %oro_datagrid.extension.orm_sorter.class%::DIRECTION_ASC
        properties:
            id: ~

    tax-jurisdiction-select-grid:
        extends: tax-jurisdiction-base-grid

    tax-jurisdiction-grid:
        extends: tax-jurisdiction-base-grid
        filters:
            columns:
                code:
                    type:      string
                    data_name: jurisdiction.code
                description:
                    type:      string
                    data_name: jurisdiction.description
        properties:
            view_link:
                type:   url
                route: orob2b_tax_jurisdiction_view
                params: [ id ]
            update_link:
                type:   url
                route: orob2b_tax_jurisdiction_update
                params: [ id ]
            delete_link:
                type:   url
                route: orob2b_api_tax_delete_taxjurisdiction
                params: [ id ]
        actions:
            view:
                type:          navigate
                label:         oro.grid.action.view
                link:          view_link
                icon:          eye-open
                acl_resource:  orob2b_tax_jurisdiction_view
                rowAction:     true
            update:
                type:          navigate
                label:         oro.grid.action.update
                link:          update_link
                icon:          edit
                acl_resource:  orob2b_tax_jurisdiction_update
            delete:
                type:          delete
                label:         oro.grid.action.delete
                link:          delete_link
                icon:          trash
                acl_resource:  orob2b_tax_jurisdiction_delete
