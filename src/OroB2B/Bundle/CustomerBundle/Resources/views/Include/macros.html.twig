{% macro oro_collection_disable_default_types_js(context) %}
<script type="text/javascript">
    require(['jquery'],
            function($){
                $(function() {
                    var container = $('#{{ context.id }}');
                    /**
                     * Switch off default checkbox when type unselected
                     */
                    container.on('click', '[name$="[defaults][default][]"]', function() {
                        if (this.checked) {
                            container.find('[name$="[types][]"][value="' + this.value + '"]').each(function (idx, el) {
                                el.checked = true;
                            });
                        }
                    });

                    container.on('click', '[name$="[types][]"]', function() {
                        var typeName = this.name;
                        var defaultTypeName = typeName.replace('[types][]', '[defaults][default][]');
                        var defaultCheckboxes = container.find('[name$="' + defaultTypeName + '"][value="' + this.value + '"]');
                        if (!this.checked) {
                            defaultCheckboxes.each(function (idx, el) {
                                el.checked = false;
                            });
                        }
                    });
                });
            });
</script>
{% endmacro %}

{% macro oro_collection_validate_default_types_js(context) %}
    {% if context.form.vars.prototype.types is defined %}
        <script type="text/javascript">
            require(['jquery'],
                    function($){
                        $(function() {
                            var container = $('#{{ context.id }}');
                            /**
                             * Allow only 1 item with selected type
                             */
                            container.on('click', '[name$="[defaults][default][]"]', function() {
                                if (this.checked) {
                                    container.find('[name$="[defaults][default][]"][value="' + this.value + '"]').each(function (idx, el) {
                                        el.checked = false;
                                    });
                                    this.checked = true;
                                }
                            });
                        });
                    });
        </script>
    {% endif %}
{% endmacro %}