{% block orob2b_sale_quote_product_collection_row %}
    <div class="sale-quoteproduct-collection">
        <table class="sale-quoteproduct-collection-table">
            <thead>
                <tr>
                    <th>Product</th>
                    <th>Type</th>
                    <th>Offers</th>
                </tr>
            </thead>
            <tbody>
                {{ form_widget(form) }}
            </tbody>
        </table>
    </div>
{% endblock %}

{% block orob2b_sale_quote_product_widget %}
    {% set attr = attr|merge({'class': (attr.class is defined ? attr.class : '') ~ ' sale-quoteproduct-widget control-group'}) %}
    
    {% set units = [] %}
    {% set product = form.vars.value.product|default(null) %}
    {% if product %}
        {% for code in product.availableUnitCodes %}
            {% set units = units|merge({ (code) : ('orob2b.product_unit.' ~ code ~ '.label.full')|trans}) %}
        {% endfor %}
    {% endif %}
    <tr>
        <td>
            <div class="sale-quoteproduct-product-select">
                {{ form_widget(form.product) }}
                {{ form_errors(form.product) }}
            </div>
        </td>
        <td>
            {{ form_widget(form.type) }}
            {{ form_errors(form.type) }}
        </td>
        <td>
            <div {{ block('widget_container_attributes') }} data-page-component-options="{{ {'units': units ? {(product.id) : units} : {} }|json_encode }}"
                        data-page-component-module="orob2bsale/js/app/components/sale-quoteproductitem-selection-component" class="sale-quoteproductitem-collection">
                {{ form_widget(form.quoteProductRequests) }}
                {{ form_widget(form.quoteProductOffers) }}
                <div>
                    <a class="btn add-list-item2" href="javascript: void(0);">Add Notes</a>
                </div>
            </div>
        </td>
    </tr>
{% endblock %}

{% block orob2b_sale_quote_product_offer_widget %}
    <table class="sale-quoteproductitem-widget">
        <tr>
            <td>
                {{ form_widget(form.quantity) }}
                {{ form_errors(form.quantity) }}
            </td>
            <td>
                {{ form_widget(form.allowIncrements) }}
                {{ form_label(form.allowIncrements) }}
                {{ form_errors(form.allowIncrements) }}
            </td>
            <td>
                {{ form_widget(form.priceType) }}
                {{ form_errors(form.priceType) }}
            </td>
            <td>
                {{ form_widget(form.productUnit, {attr: attr|merge({class: 'sale-quoteproductitem-productunit-select'})}) }}
                {{ form_errors(form.productUnit) }}
            </td>
            <td>
                {{ form_widget(form.price) }}
            </td>
        </tr>
    </table>
{% endblock %}

{% block orob2b_sale_quote_product_request_widget %}
    <table class="sale-quoteproductitem-widget">
        <tr>
            <td>Quote Line Item:</td>
            <td>
                {{ form_widget(form.quantity) }}
                {{ form_errors(form.quantity) }}
            </td>
            <td>
                {{ form_widget(form.productUnit, {attr: attr|merge({class: 'sale-quoteproductitem-productunit-select'})}) }}
                {{ form_errors(form.productUnit) }}
            </td>
            <td>
                {{ form_widget(form.price.value) }}
                {{ form_errors(form.price.value) }}
            </td>
            <td>
                {{ form_widget(form.price.currency) }}
                {{ form_errors(form.price.currency) }}
            </td>
        </tr>
    </table>
{% endblock %}
