{% block _account_user_role_title_widget %}
    <h1 class="nmmt4-md">
        <span>{{ role.label }}</span>
    </h1>
{% endblock %}

{% block _account_user_role_top_actions_widget %}
    {% set attr = attr|merge({class: attr.class|default('') ~ "text-right"}) %}
    <div{{ block('block_attributes') }}>
        {{ block_widget(block) }}
    </div>
{% endblock %}

{% block _account_user_role_items_view_privileges_widget %}
    {% set prefix = prefix|default('orob2b.account.frontend.security.access-level.') %}
    {% set none_ownership = constant('Oro\\Bundle\\OrganizationBundle\\Form\\Type\\OwnershipType::OWNER_TYPE_NONE') %}

    {% for privilegeConfigName, privilegeConfig in privileges.privilegesConfig %}
        <div class="account-oq-container">
            <div class="account-oq__item__head">
                <div class="account-oq__item account-oq__item_full mb0-sm">
                    <h2 class="account-oq__item__title">
                        {{ privilegeConfig.label|trans }}
                    </h2>
                </div>
            </div>
            <div class="account-oq__item__body">
                {% if privilegeConfig.view_type == 'grid' %}
                    <table class="oro-grid-table">
                        <thead>
                            <tr>
                                <th class="span6">&nbsp;</th>
                                <th>{{ 'orob2b.account.security.permissions'|trans }}</th>
                            </tr>
                        </thead>
                        <tbody>
                        {% for privilege in privileges.data[privilegeConfigName] %}
                            <tr>
                                <td>
                                    <strong>{{ privilege.identity.name|trans }}</strong>
                                </td>
                                <td>
                                    <table class="oro-grid-table borderless">
                                        <tbody>
                                        {% for field in privilegeConfig['permissions'] %}
                                            {% for permission in privilege.permissions %}
                                                {% if permission.name == field %}
                                                    <tr>
                                                        <td class="span8">
                                                            {% set aclPermission = acl_permission(permission) %}

                                                            {{ aclPermission.label|default(permission.name)|trans }}
                                                            {% if aclPermission.description %} ({{ aclPermission.description|trans }}){% endif %}
                                                        </td>
                                                        <td>
                                                            {% set accessLevel = prefix ~ (privileges.accessLevelNames[permission.accessLevel-1])|default(none_ownership) %}
                                                            <div>{{ accessLevel|trans }}</div>
                                                        </td>
                                                    </tr>
                                                {% endif %}
                                            {% endfor %}
                                        {% endfor %}
                                        </tbody>
                                    </table>
                                </td>
                            </tr>
                            <tr>
                                <td class="decor-row" colspan="2"></td>
                            </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                {% else %}
                    <div class="row mt1-md mb1-md">
                    {% for privilege in privileges.data[privilegeConfigName] %}
                        <div class="col-md-6">
                            <div class="row">
                                <div class="col-md-9">
                                    <strong>{{ privilege.identity.name|trans }}</strong>
                                </div>
                                {% for permission in privilege.permissions %}
                                    {% set accessLevel = prefix ~ (privileges.accessLevelNames[permission.accessLevel-1])|default(none_ownership) %}
                                    <div class="col-md-3 text-center">{{ accessLevel|trans }}</div>
                                {% endfor %}
                            </div>
                        </div>
                        {% if loop.index is even %}
                            </div><div class="row mb1-md">
                        {% endif %}
                    {% endfor %}
                    </div>
                {% endif %}
            </div>
        </div>
    {% endfor %}
{% endblock %}


{% block _account_user_role_items_view_users_widget %}
    <div class="account-oq-container">
        <div class="account-oq__item__head">
            <div class="account-oq__item account-oq__item_full mb0-sm">
                <h2 class="account-oq__item__title">
                    {{ 'orob2b.account.sections.accountuserrole.users'|trans }}
                </h2>
            </div>
        </div>
        <div class="account-oq__item__body">
            {{ block_widget(block) }}
        </div>
    </div>
{% endblock %}
