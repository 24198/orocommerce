definitions:
    change_category_position:
        label: 'Changed Category Position In Tree'
        enabled: true
        entity: OroB2B\Bundle\CatalogBundle\Entity\Category
        actions_configuration:
            - @change_category_position: ~

    change_category_visibility:
        label: 'Changed Category Visibility For All'
        enabled: true
        entity: OroB2B\Bundle\AccountBundle\Entity\Visibility\CategoryVisibility
        actions_configuration:
            - @change_category_visibility: ~

    change_account_group_category_visibility:
        label: 'Changed Category Visibility For Account Group'
        enabled: true
        entity: OroB2B\Bundle\AccountBundle\Entity\Visibility\AccountGroupCategoryVisibility
        actions_configuration:
            - @change_category_visibility: ~

    change_account_category_visibility:
        label: 'Changed Category visibility For Account'
        enabled: true
        entity: OroB2B\Bundle\AccountBundle\Entity\Visibility\AccountCategoryVisibility
        actions_configuration:
            - @change_category_visibility: ~

    product_visibility_change:
        enabled: true
        label: Product visibility change
        entity: OroB2B\Bundle\AccountBundle\Entity\Visibility\ProductVisibility
        actions_configuration:
            - @resolve_visibility_settings: ~

    product_visibility_remove:
        enabled: true
        label: Product visibility change
        entity: OroB2B\Bundle\AccountBundle\Entity\Visibility\ProductVisibility
        actions_configuration:
            - @resolve_visibility_settings:
                reset_visibility: true  # manually set "category" fallback

    account_group_product_visibility_change:
        enabled: true
        label: Account group product visibility change
        entity: OroB2B\Bundle\AccountBundle\Entity\Visibility\AccountGroupProductVisibility
        actions_configuration:
            - @resolve_visibility_settings: ~

    account_product_visibility_change:
        enabled: true
        label: Account product visibility change
        entity: OroB2B\Bundle\AccountBundle\Entity\Visibility\AccountProductVisibility
        actions_configuration:
            - @resolve_visibility_settings: ~

triggers:
    change_category_position:
        -
            event: update
            field: parentCategory

    change_category_visibility:
        -
            event: create
        -
            event: update
        -
            event: delete

    change_account_group_category_visibility:
        -
            event: create
        -
            event: update
        -
            event: delete

    change_account_category_visibility:
        -
            event: create
        -
            event: update
        -
            event: delete

    product_visibility_change:
        -
            event: create
        -
            event: update

    product_visibility_remove:
        -
            event: delete

    account_group_product_visibility_change:
        -
            event: create
        -
            event: update

    account_product_visibility_change:
        -
            event: create
        -
            event: update
