{% block block_attributes_raw_id -%}
    {{ ' ' }}{% spaceless %}
        {% if attr.class is defined %}
            {% set attr = attr|merge({
                class: attr.class|replace({'{{ class_prefix }}': class_prefix})
            }) %}
        {% endif %}
        {% for attrname, attrvalue in attr %}
            {% if attrname is same as('title') %}
                {{ attrname }}="{{ attrvalue|block_text(translation_domain) }}"
            {% elseif attrname is same as('id') %}
                {{- attrname }}="{{ attrvalue|raw -}}"
            {% else %}
                {{ attrname }}="{{ attrvalue }}"
            {% endif %}
        {% endfor %}
    {% endspaceless %}
{%- endblock %}

{% block _add_to_shopping_list_form_start_widget %}
    {% set attr = attr|merge({
        'id': form.vars.id ~ '-product-id-<%= model.id %>',
        'block_attributes': 'block_attributes_raw_id'
    }) %}
    {{ block('form_start_widget') }}
{% endblock %}

{% block _add_to_shopping_list_form_fields_widget %}
    {% set attr = attr|merge({
        class: attr.class|default('') ~ " product-item__qty__current-grid"
    }) %}
    <div {{ block('block_attributes') }}
            data-page-component-module="orob2bshoppinglist/js/app/components/product-unit-select-component"
            data-product-units='<%= model.units %>'>
        {{ block_widget(block) }}
    </div>
{% endblock %}

{% block _add_to_shopping_list_form_widget %}
    {% set attr = attr|merge({
        class: attr.class|default('') ~ " product-item__qty product-item__qty_<%= themeOptions.view %>"
    }) %}
    <div {{ block('block_attributes_raw_class') }}>
        {{ block_widget(block) }}
    </div>
{% endblock %}

{% block _add_to_shopping_list_form_button_widget %}
    {% set attr = attr|merge({
        class: attr.class|default('') ~ " add-product-from-view-component"
    }) %}
    {% import 'OroB2BShoppingListBundle:ShoppingList/Frontend:buttons.html.twig' as buttons %}
    {% set commonOptions = {
        dataUrl: 'orob2b_shopping_list_frontend_add_product',
        dataUrlOptions: {},
        dataAttributes: {}
    } %}
    <div {{ block('block_attributes') }}
            data-page-component-module="orob2bshoppinglist/js/app/components/add-product-from-index-component" data-product-id="<%= model.id %>">
        {{ buttons.createAddToShoppingListButton({
            groupContainer: '<div class="btn btn-dark btn_has-dropdown btn_has-dropdown_md"></div>',
            new: commonOptions,
            current: commonOptions,
            existing: commonOptions,
            shoppingLists: shoppingLists
        }) }}
    </div>
{% endblock %}
