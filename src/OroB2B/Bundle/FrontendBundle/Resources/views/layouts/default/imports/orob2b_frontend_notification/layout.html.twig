{% block __orob2b_frontend_notification__notification_widget %}
    {% set attr = layout_attr_defaults(attr, {
        'id': 'flash-messages',
        '~class': ' notification-flash',
        'data-sticky': {
        'placeholderId': 'sticky-element-notification',
        'toggleClass': 'notification-flash--medium'
    }
    }) %}
    <div{{ block('block_attributes') }}></div>
    <script type="text/template" id="message-item-template">
        <% iconClass = 'cf-check' %>
        <% if (type === "error" || type === "warning") {
        iconClass = 'cf-attention';
        }%>
        <div class="container-fluid alert notification notification_<%= type %> notification_lg">
            <span class="badge badge_sm_xs badge_<%= type %>"><i class="<%= iconClass %>"></i></span>
            <span class="fs16 ml1-sm"><%= message %></span>
            <i class="cf-clear" data-dismiss="alert"></i>
        </div>
    </script>
    <script type="text/javascript">
        require(['jquery', 'oroui/js/messenger'],
                function($, messenger) {
                    messenger.setup({
                        container: '#{{ attr.id }}',
                        template: _.template($.trim($('#message-item-template').html()))
                    });
                    {% if app.session.flashbag.peekAll|length > 0 %}
                    $(function() {
                        {% for type, messages in app.session.flashbag.all %}
                        {% for message in messages %}
                        messenger.notificationFlashMessage({{ type|json_encode|raw }}, {{ message|trans|json_encode|raw }});
                        {% endfor %}
                        {% endfor %}
                    });
                    {% endif %}
                });
    </script>
{% endblock %}
