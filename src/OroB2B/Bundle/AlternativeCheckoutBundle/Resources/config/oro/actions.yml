operations:
    orob2b_accept_quote:
        label: orob2b.sale.quote.actions.accept_quote
        enabled: true
        applications: [frontend]
        routes:
            - orob2b_sale_quote_frontend_view
        order: 10
        button_options:
            icon: icon-time
        acl_resource: orob2b_alternativecheckout_checkout_approve
        preactions:
            - @find_entity:
                class: OroB2B\Bundle\SaleBundle\Entity\QuoteDemand
                attribute: $.quoteDemand
                where:
                    quote: $.data
            - @find_entity:
                conditions:
                    @not_empty: $.quoteDemand
                class: OroB2B\Bundle\CheckoutBundle\Entity\CheckoutSource
                attribute: $.checkoutSource
                where:
                    quoteDemand: $.quoteDemand
            - @find_entity:
                conditions:
                    @not_empty: $.checkoutSource
                class: OroB2B\Bundle\AlternativeCheckoutBundle\Entity\AlternativeCheckout
                attribute: $.checkout
                where:
                    source: $.checkoutSource
        preconditions:
            @not_empty: $.checkout
        actions:
            - @redirect:
                route: 'orob2b_checkout_frontend_checkout'
                route_parameters:
                    id: $.checkout.id
                    type: alternative
