<div class="widget-content">
    {% if response is defined %}
        <script type="text/javascript">
            require(['oroui/js/widget-manager'],
                function(widgetManager) {
                    widgetManager.getWidgetInstance({{ app.request.get('_wid')|json_encode|raw }}, function(widget) {
                        widget.trigger('formSave', {{ response|json_encode|raw }});
                    });
                });
        </script>
    {% else %}
        {% if form.vars.errors|length > 0 %}
            <div class="alert alert-error">
                {{ form_errors(form) }}
            </div>
        {% endif %}
        {{ form_start(form, {
            'method': 'POST',
            'action': app.request.uri,
            'attr': {
                'class': 'form-dialog',
                'data-nohash': 'true',
                'data-disable-autofocus': 'true',
                'id': form.vars.id,
            },
        }) }}
            {{ form_widget(form) }}

            <div class="widget-actions form-actions">
                {% block page_container_form_actions %}
                    <button class="btn" type="reset">{{ 'Cancel'|trans }}</button>
                    <button class="btn btn-success" type="submit">{{ 'Submit'|trans }}</button>
                {% endblock %}
            </div>
        {{ form_end(form) }}
        {{ oro_form_js_validation(form) }}
    {% endif %}
</div>
