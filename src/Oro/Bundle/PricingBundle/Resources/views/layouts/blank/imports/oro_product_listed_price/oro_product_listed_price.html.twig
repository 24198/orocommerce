{% block __oro_product_price__product_price_listed_widget %}
    {% set attr = layout_attr_defaults(attr, {
        '~class': ' product-price__listed'
    }) %}
    <div {{ block('block_attributes') }}>
        {% if productPrices %}
            {{ 'oro.pricing.frontend.pricelist.index.listed_price'|trans }}
            <span>
                {% set pricesPerUnits = [] %}
                {% for price in productPrices %}
                    {% set unit = price.unit %}
                    {% if pricesPerUnits[unit] is not defined or price.quantity < pricesPerUnits[unit].quantity %}
                        {% set pricesPerUnits = pricesPerUnits|merge({
                        (unit): price
                        }) %}
                    {% endif %}
                {% endfor %}
                {% for price in pricesPerUnits %}
                    <span title="{{ 'oro.pricing.productprice.applicable_from'|trans({'%amount%': price.quantity})|raw }}">
                        <span class="product-price__listed-value">{{ price.formatted_price }}</span>
                        <span> / </span>
                        <span>{{ price.formatted_unit}}</span>
                    </span>
                {% endfor %}
            </span>
        {% endif %}
    </div>
{% endblock %}
