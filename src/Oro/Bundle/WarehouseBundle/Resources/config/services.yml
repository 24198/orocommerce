parameters:
    orob2b_warehouse.entity.warehouse.class: Oro\Bundle\WarehouseBundle\Entity\Warehouse
    orob2b_warehouse.entity.warehouse_inventory_level.class: Oro\Bundle\WarehouseBundle\Entity\WarehouseInventoryLevel

services:
    orob2b_warehouse.warehouse_inventory_level.manager.api:
        class: 'Oro\Bundle\SoapBundle\Entity\Manager\ApiEntityManager'
        parent: oro_soap.manager.entity_manager.abstract
        arguments:
            - '%orob2b_warehouse.entity.warehouse_inventory_level.class%'
            - "@doctrine.orm.entity_manager"

    orob2b_warehouse.entity.helper.warehouse_counter:
        class: 'Oro\Bundle\WarehouseBundle\Entity\Helper\WarehouseCounter'
        arguments: ["@oro_entity.doctrine_helper"]

    orob2b_warehouse.api.processor.product_id.normalize_input:
        class: 'Oro\Bundle\ProductBundle\Api\Processor\NormalizeProductId'
        tags:
            - { name: oro.api.processor, action: update, group: normalize_input, priority: -105, class: '%orob2b_warehouse.entity.warehouse_inventory_level.class%' }

    orob2b_warehouse.api.processor.entity_id.load_data:
        class: 'Oro\Bundle\ProductBundle\Api\Processor\LoadEntityId'
        tags:
            - { name: oro.api.processor, action: update, group: load_data, priority: -50, class: '%orob2b_warehouse.entity.warehouse_inventory_level.class%' }

    orob2b_warehouse.api.processor.update_warehouse_inventory_level.build_query:
        class: 'Oro\Bundle\WarehouseBundle\Api\Processor\BuildSingleWarehouseInventoryLevelQuery'
        arguments:
            - '@oro_api.doctrine_helper'
            - '@oro_api.criteria_connector'
            - '@orob2b_warehouse.entity.helper.warehouse_counter'
        tags:
            - { name: oro.api.processor, action: update, group: build_query, priority: -95, class: '%orob2b_warehouse.entity.warehouse_inventory_level.class%' }

    orob2b_warehouse.api.processor.create_warehouse_inventory_level.normalize_input:
        class: 'Oro\Bundle\WarehouseBundle\Api\Processor\NormalizeInventoryLevelRequestData'
        arguments:
            - '@oro_api.doctrine_helper'
            - '@orob2b_warehouse.entity.helper.warehouse_counter'
        tags:
            - { name: oro.api.processor, action: create, group: normalize_input, priority: -45, class: '%orob2b_warehouse.entity.warehouse_inventory_level.class%' }

    orob2b_warehouse.form.autocomplete.warehouse.search_handler:
        public: false
        parent: oro_form.autocomplete.search_handler
        arguments:
            - '%orob2b_warehouse.entity.warehouse.class%'
            - ["name"]
        tags:
            - { name: oro_form.autocomplete.search_handler, alias: orob2b_warehouse, acl_resource: orob2b_warehouse_view }

    orob_warehouse.validator.unique_warehouse:
        class: 'Oro\Bundle\WarehouseBundle\Validator\Constraints\UniqueWarehouseValidator'
        tags:
            - { name: validator.constraint_validator, alias: oro_warehouse_unique_warehouse_validator }
