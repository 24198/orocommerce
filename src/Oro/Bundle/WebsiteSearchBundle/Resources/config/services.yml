parameters:
    oro_website_search.mock.class:                             Oro\Bundle\WebsiteSearchBundle\Engine\ExampleMockEngine
    oro_website_search.query_factory.class:                    Oro\Bundle\WebsiteSearchBundle\Query\Factory\QueryFactory
    oro_website_search.select_data.listener.class:             Oro\Bundle\WebsiteSearchBundle\EventListener\ExampleSelectDataListener
    oro_website.website_crud_reindexation_triggering_listener: Oro\Bundle\WebsiteSearchBundle\EventListener\WebsiteCrudReindexationTriggeringListener

services:
    oro_website_search.mock.engine:
        class: %oro_website_search.mock.class%
        arguments:
            - '@doctrine.orm.entity_manager'

    oro_website_search.query_factory:
        decorates: oro_search.query_factory
        class: %oro_website_search.query_factory.class%
        arguments:
            - '@oro_website_search.query_factory.inner'
            - '@event_dispatcher'
            - '@oro_website_search.mock.engine'

    oro_website_search.select_data.listener:
        class: %oro_website_search.select_data.listener.class%
        tags:
            - { name: kernel.event_listener, event: oro_website_search.select_index_data, method: process }

    oro_website_search.website_crud_reindexation_triggering_listener:
        class: %oro_website.website_crud_reindexation_triggering_listener%
        arguments:
            - '@event_dispatcher'
        tags:
            - { name: doctrine.orm.entity_listener, entity: 'Oro\Bundle\WebsiteBundle\Entity\Website', event: postPersist }
            - { name: doctrine.orm.entity_listener, entity: 'Oro\Bundle\WebsiteBundle\Entity\Website', event: preRemove }
