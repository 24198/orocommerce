parameters:
    oro_commerce_menu.entity.menu_update.class: 'Oro\Bundle\CommerceMenuBundle\Entity\MenuUpdate'

services:
    oro_commerce_menu.menu.condition.condition_extension:
        class: 'Oro\Bundle\CommerceMenuBundle\Menu\Condition\ConditionExtension'
        public: false
        tags:
            - { name: oro_navigation.menu_extension, priority: 80 }

    oro_commerce_menu.menu.condition.config_value_expression_language_provider:
        class: 'Oro\Bundle\CommerceMenuBundle\Menu\Condition\ConfigValueExpressionLanguageProvider'
        public: false
        arguments:
            - '@oro_config.manager'
        tags:
            - { name: oro_commerce_menu.condition.expression_language_provider, alias: config_value }

    oro_commerce_menu.menu.condition.logged_in_expression_language_provider:
        class: 'Oro\Bundle\CommerceMenuBundle\Menu\Condition\LoggedInExpressionLanguageProvider'
        public: false
        arguments:
            - '@oro_security.security_facade.link'
        tags:
            - { name: oro_commerce_menu.condition.expression_language_provider, alias: is_logged_in }

    oro_commerce_menu.twig.menu_extension:
        class: 'Oro\Bundle\CommerceMenuBundle\Twig\MenuExtension'
        public: false
        arguments:
            - '@knp_menu.matcher'
        tags:
            - { name: twig.extension }

    oro_commerce_menu.ownership_provider.global:
        class: Oro\Bundle\NavigationBundle\Menu\Provider\GlobalOwnershipProvider
        arguments:
            - '@doctrine'
            - '%oro_commerce_menu.entity.menu_update.class%'
        tags:
            - { name: oro_navigation.ownership_provider, area: frontend, priority: 100 }

    oro_commerce_menu.ownership_provider.account:
        class: 'Oro\Bundle\CommerceMenuBundle\Provider\AccountOwnershipProvider'
        arguments:
            - '@doctrine'
            - '%oro_commerce_menu.entity.menu_update.class%'
            - '@security.token_storage'
        tags:
            - { name: oro_navigation.ownership_provider, area: frontend, priority: 200 }

    oro_commerce_menu.namespace_migration_provider:
        class: 'Oro\Bundle\CommerceMenuBundle\CacheWarmer\NamespaceMigrationProvider'
        tags:
            - {name: oro_installer.namespace_migration_provider, priority: 15}

    oro_commerce_menu.listener.update_entity_config_relations:
        class: 'Oro\Bundle\CommerceMenuBundle\CacheWarmer\UpdateEntityConfigWarmer'
        arguments:
            - '@doctrine'
            - '@logger'
        tags:
            - { name: oro_entity_extend.warmer, priority: -500 }

    oro_commerce_menu.data_provider.menu:
        class: 'Oro\Bundle\CommerceMenuBundle\Layout\DataProvider\MenuProvider'
        arguments:
          - '@oro_menu.builder_chain'
        tags:
            - { name: layout.data_provider, alias: menu }
