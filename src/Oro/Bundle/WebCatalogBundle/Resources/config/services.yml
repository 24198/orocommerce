parameters:
    oro_web_catalog.entity.web_catalog.class: Oro\Bundle\WebCatalogBundle\Entity\WebCatalog
    oro_web_catalog.entity.content_node.class: Oro\Bundle\WebCatalogBundle\Entity\ContentNode
    oro_web_catalog.entity.content_variant.class: Oro\Bundle\WebCatalogBundle\Entity\ContentVariant

services:
    oro_web_catalog.page_type.registry:
        class: 'Oro\Bundle\WebCatalogBundle\PageType\PageTypeRegistry'
        public: false

    oro_web_catalog.content_node_tree_handler:
        class: Oro\Bundle\WebCatalogBundle\JsTree\ContentNodeTreeHandler
        arguments:
            - '%oro_web_catalog.entity.content_node.class%'
            - '@doctrine'

    oro_web_catalog.twig.extension:
        class: Oro\Bundle\WebCatalogBundle\Twig\WebCatalogExtension
        public: false
        arguments:
            - '@oro_web_catalog.content_node_tree_handler'
        tags:
            - { name: twig.extension }

    oro_web_catalog.event_listener.orm.category_listener:
        class: 'Oro\Bundle\WebCatalogBundle\EventListener\ContentNodeListener'
        public: false
        arguments:
            - '@oro_web_catalog.model.content_node_materialized_path_modifier'
            - '@oro_b2bentity.extra_insert_entity_storage'
        tags:
            - { name: doctrine.orm.entity_listener, entity: '%oro_web_catalog.entity.content_node.class%', event: postPersist }
            - { name: doctrine.orm.entity_listener, entity: '%oro_web_catalog.entity.content_node.class%', event: preUpdate }

    oro_web_catalog.model.content_node_materialized_path_modifier:
        class: 'Oro\Bundle\WebCatalogBundle\Model\ContentNodeMaterializedPathModifier'
        public: false
        arguments:
            - '@doctrine'

    oro_web_catalog.form.type.web_catalog:
        class: Oro\Bundle\WebCatalogBundle\Form\Type\WebCatalogType
        tags:
            - { name: form.type, alias: oro_web_catalog }
