parameters:
    oro_web_catalog.entity.content_node.class: Oro\Bundle\WebCatalogBundle\Entity\ContentNode

services:
    oro_web_catalog.event_listener.orm.category_listener:
        class: 'Oro\Bundle\WebCatalogBundle\EventListener\ContentNodeListener'
        public: false
        arguments:
            - '@oro_web_catalog.model.content_node_materialized_path_modifier'
        tags:
            - { name: doctrine.orm.entity_listener, entity: '%oro_web_catalog.entity.content_node.class%', event: postPersist }
            - { name: doctrine.orm.entity_listener, entity: '%oro_web_catalog.entity.content_node.class%', event: preUpdate }

    oro_web_catalog.model.content_node_materialized_path_modifier:
        class: 'Oro\Bundle\WebCatalogBundle\Model\ContentNodeMaterializedPathModifier'
        public: false
        arguments:
            - '@oro_b2bentity.extra_insert_entity_storage'