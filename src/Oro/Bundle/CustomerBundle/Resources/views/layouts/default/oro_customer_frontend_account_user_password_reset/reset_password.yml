layout:
    actions:
        - '@setBlockTheme':
            themes: 'OroCustomerBundle:layouts:default/oro_customer_frontend_account_user_password_reset/reset_password.html.twig'

        - '@appendOption':
            id: title
            optionName: value
            optionValue: 'oro.customer.accountuser.profile.reset_password.title'

        - '@addTree':
            items:
                reset_password_page:
                    blockType: container
                    options:
                        class_prefix: 'reset-password'
                reset_password_form:
                    blockType: container
                reset_password_form_label:
                    blockType: text
                    options:
                        text: 'oro.customer.accountuser.profile.reset_password.title'
                reset_password_form_start:
                    blockType: form_start
                    options:
                        # TODO REFACTOR AFTER MERGE BB-5243
                        form: '=data["oro_account_frontend_account_user_form"].getResetPasswordForm().getView()'
                        form_config: '=data["oro_account_frontend_account_user_form"].getResetPasswordForm().getForm().getConfig()'
                        form_route_name: 'oro_customer_frontend_account_user_password_reset'
                        form_route_parameters:
                            token: '=data["user"].getConfirmationToken()'
                            username: '=data["user"].getUsername()'
                reset_password_form_fields:
                    blockType: form_fields
                    options:
                        # TODO REFACTOR AFTER MERGE BB-5243
                        form: '=data["oro_account_frontend_account_user_form"].getResetPasswordForm().getView()'
                        form_config: '=data["oro_account_frontend_account_user_form"].getResetPasswordForm().getForm().getConfig()'
                reset_password_form_return_to_login:
                    blockType: link
                    options:
                        route_name: oro_customer_account_user_security_login
                        text: 'oro.customer.accountuser.profile.return_to_login'
                reset_password_form_submit:
                    blockType: button
                    options:
                        type: input
                        action: submit
                        text: 'oro.customer.accountuser.profile.reset_password.label'
                        style: auto
                reset_password_form_end:
                    blockType: form_end
                    options:
                        # TODO REFACTOR AFTER MERGE BB-5243
                        form: '=data["oro_account_frontend_account_user_form"].getResetPasswordForm().getView()'
                        form_config: '=data["oro_account_frontend_account_user_form"].getResetPasswordForm().getForm().getConfig()'
            tree:
                content:
                    reset_password_page:
                        reset_password_form:
                            reset_password_form_start: ~
                            reset_password_form_label: ~
                            reset_password_form_fields: ~
                            reset_password_form_submit: ~
                            reset_password_form_return_to_login: ~
                            reset_password_form_end: ~
    imports:
        - 'only_content'
